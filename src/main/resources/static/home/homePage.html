<!DOCTYPE html>
<html>

<head>
    <title>首页</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="/Library/home/home.css"/>
    <script src="/Library/home/js/jquery-3.6.0.js"></script>
    <script src="/Library/home/js/animation.js"></script>
</head>

<body>
<header>
    <ul class="headline_left"><img src="/Library/home/img/logo.png" alt="校徽" class="badge">
        &nbsp;<li class="badge_tile">浙江工业大学图书馆选座系统</li>
    </ul>
    <ul class="headline_right">
        <li><a href="#" class="rule_sign">预约规则</a>
        </li>
        <li><a href="#" class="login_sign">登录</a>
        </li>
        <li><a href="#">设置</a>
            <dl>
                <dd><a href="#">1</a></dd>
                <dd><a href="#">2</a></dd>
                <dd><a href="#">3</a></dd>
            </dl>
        </li>
    </ul>
</header>

<div class="outer">
    <div class="pct first">
        <img src="/Library/home/img/1.jpg" alt="1" class="img"/>
        <div class="bottom_content">
            <h1 class="title">屏峰图书馆</h1>
            <p>
                图书馆位于屏峰校区主入口中轴线上，在总体布局上采用以中轴线为中心线南北对称的布局手法，使之成为校区主入口出发的中轴线底景。在景观设计上充分考虑与上埠河、小和山山体的融合，既体现主入口标志性建筑物的大气，又融入小和山的秀气与水韵的灵动。
            </p>
        </div>
    </div>

    <div class="pct">
        <img src="/Library/home/img/2.jpg" alt="2" class="img"/>
        <div class="bottom_content">
            <h1 class="title">屏峰图书馆</h1>
            <p>
                在建筑造型上，立面造型体现新古典风格的优雅书卷气氛和学校特有的历史氛围。西面的半圆形布局和环境相呼应形成强烈的向心感，使之成为校园总体布局上的一个最重要的空间节点。屋面的穹顶和远山遥相呼应，和小和山的自然景观相协调，相得益彰。
            </p>
        </div>
    </div>

    <div class="pct">
        <img src="/Library/home/img/3.jpg" alt="3" class="img"/>
        <div class="bottom_content">
            <h1 class="title">屏峰图书馆</h1>
            <p>
                图书馆半地下室南侧为车库和设备用房，北侧为机动车库。一层东面为休息、接待大厅，结合布置有咖啡厅等文化休闲场所；北面为一个大报告厅、一个小报告厅和两个展示厅。
            </p>
        </div>
    </div>

    <div class="pct">
        <img src="/Library/home/img/4.jpg" alt="4" class="img"/>
        <div class="bottom_content">
            <h1 class="title">屏峰图书馆</h1>
            <p>
                二-四层围绕内院布置，东西各为两个集“藏、借、阅”为一体的多功能阅览室。五层西面为多功能阅览室；东面布置有语音教学室、多媒体教室等用房。六层布置研究室、媒体制作室、节目制作室、光盘检索室及管理办公等用房。顶层布置接待室。
            </p>
        </div>
    </div>

    <div class="pct">
        <img src="/Library/home/img/5.jpg" alt="5" class="img"/>
        <div class="bottom_content">
            <h1 class="title">朝晖图书馆</h1>
            <p>
                源于学校人数的扩张浙江工业大学六边型图书馆已不再能满足工大学子对图书馆功能的要求。立项了浙江工业大学新图书馆。新馆是浙江工业大学校园总体规划的重要建筑，新馆选址在校园教学区的东北部。也就是在美丽的上塘河边，基地的南面是教学楼和邵逸夫科技馆、西面是教学科研大楼。
            </p>
        </div>
    </div>

    <div class="pct">
        <img src="/Library/home/img/6.jpg" alt="6" class="img"/>
        <div class="bottom_content">
            <h1 class="title">莫干山图书馆</h1>
            <p>
                外正内圆的建筑风格，现代感满满，简洁却不简单。一进图书馆，就感觉到了满满的书卷气和，非常浓厚的古典气息。图书馆上下共六层，预计总藏书量在40万册左右。整个图书馆内部以圆形设计为主，阅览区、书架环形而列，圆厅阅览区主要是休闲阅读类书籍。此外，外围还有其他阅览室。
            </p>
        </div>
    </div>

    <div class="leftbtn" onclick="toLeft();">
        <p class="left_arrows">&lt;</p>
    </div>
    <div class="rightbtn" onclick="toRight();">
        <p class="right_arrows">&gt;</p>
    </div>
</div>

<div class="enterbtn">
    <a href="#">开始预约</a>
</div>
<!--        登录弹窗-->
<div class="background" id="background"></div>
<div class="entrance" id="entrance">
    <p class="entrance_title">登录</p>
    <p class="closebtn">X</p>
    <hr style="clear: both">
    <form action="/Library/user/login" method="post" name="loginForm">
        <select class="choice" name="identity" id="identity" required autofocus>
            <option value="" id="choose_all" selected>选择身份</option>
            <option value="1">学生</option>
            <option value="0">管理员</option>
        </select><br>
        <input type="text" name="sno" id="sno" placeholder="学号" required><br>
        <input type="password" name="password" id="pwd" placeholder="密码" required><br>
        <!--        记录登录信息尚未实现-->
        <input type="checkbox" id="check" name="autoLog">下次自动登录<br>
        <input type="button" value="登录" class="loginbtn" id="loginBtn" onclick="login()">
        <h3 id="errMsg" style="color: red;text-align: center;font-size: 15px"></h3>
    </form>

</div>
<!--        预约规则弹窗-->
<div class="rule" id="rule">
    <span class="rule_title">预约规则</span>
    <span class="closebtn">X</span>
    <hr style="clear: both">
    <p class="written">1、预约：读者可登录此界面预约当日座位。<br>
        2、取消预约：可在预约生效后30分钟内取消。<br>
        3、签到：<br>
        &nbsp;（1）读者成功预约后需在一小时内进馆并扫描桌上二维码进行签到。<br>
        &nbsp;（2）若未按时签到，系统视为失约处理一次。<br>
        4、离座离馆：<br>
        &nbsp;（1）正常离馆：读者需扫描桌上的二维码选择“离馆”。<br>
        &nbsp;（2）饭点时间离馆（中饭：11：30-13：00 晚饭：17：00-18：30）：读者可在此时间段内通过入馆口刷卡离馆，出馆时间限制为1h,回馆可直接刷卡入馆。（此过程无需扫码）<br>
        &nbsp;（3）临时离馆：<br>
        &nbsp;&nbsp; &nbsp;①馆内：读者需扫描桌上的二维码选择“临时离座”，时间限制为30分钟，回座后需再次扫描二维码进行“临时离座签到”。<br>
        &nbsp;&nbsp;&nbsp; ②馆外：读者需扫描桌上的二维码选择“临时出馆”，时间限制为30分钟，回馆可直接刷卡入馆，无需再次扫码。<br>
        &nbsp;（4）以上未在规定时间内回馆签到，系统视为失约处理一次。<br>
        5、失约处理：<br>
        &nbsp;（1）系统建立信用制度，读者当月违规次数满5次，不能进行座位预约。<br>
        &nbsp;（2）读者可在此网页点击“个人中心”查看个人违规次数。<br>
        &nbsp;（3）次月，系统违规记录将进行刷新，所有违规次数归零，恢复座位预约权限。<br>
        6、推荐预约：根据读者以往选座情况，系统自动推荐5-10个仍为空位状态的位置。<br>
        7、如果您有任何意见或建议，请联系：8888888888<br></p>
    <p>
        <button class="confirmbtn">确认</button>
    </p>

</div>
<footer>&copy;2021
</footer>

<script>

    let pct = document.querySelectorAll(".pct");
    let i = 0;
    //                let autoPlay = true;

    let mark = (function () {
        let scan;

        function start() {
            scan = setInterval(function toRight() {
                pct[i].classList.remove("first");
                i++;
                if (i >= pct.length) {
                    i = 0;
                }
                pct[i].classList.add("first");
            }, 4500);
        }

        function stop() {
            clearInterval(scan);
        }

        return {start: start, stop: stop};
    }())
    mark.start();

    function toRight() {
        mark.stop();
        pct[i].classList.remove("first");
        i++;
        if (i >= pct.length) {
            i = 0;
        }
        pct[i].classList.add("first");
        mark.start();
    }

    function toLeft() {
        mark.stop();
        pct[i].classList.remove("first");
        i--;
        if (i < 0) {
            i = pct.length - 1;
        }
        pct[i].classList.add("first");
        mark.start();
    }

    function login() {
        let identity = $("#identity>option:selected").val();
        console.log($('#sno').val());
        $.ajax({
            url: "/Library/user/login",
            type: "POST",
            data:
                {
                    "identity": identity,
                    "sno": $("#sno").val(),
                    "password": $("#pwd").val()
                },
            dataType: "TEXT",
            success: function (response) {
                $("#errMsg").empty();
                if (response.trim() == "OK") {
                    /** 将身份信息共享，不同身份主页面呈现不同
                     * 如果是学生，则为当前页面
                     * 如果是管理员，则信息显示方面与权限方面有所差别
                     */
                    if (identity == 1) { // student
                        window.location.href = "/Library/main/library.jsp";
                    } else if (identity == 0) { // manager
                        window.location.href = "/Library/main/library.jsp";
                    }
                } else {
                    $("#errMsg").text(response);
                    $("#sno").focus();
                }
            }
        })
    }
</script>
</body>
<footer>
    <div id="daytime"></div>
    <script>
        setInterval(function () {
            document.getElementById("daytime").innerHTML = new Date().toLocaleString();
        }, 1000)
    </script>
</footer>

</html>